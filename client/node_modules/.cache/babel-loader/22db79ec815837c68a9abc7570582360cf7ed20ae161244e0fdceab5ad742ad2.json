{"ast":null,"code":"import { AUTH_ROUTE } from \"../index\";\nimport { getClientIdCache } from \"../../cache/auth\";\nexport const logInRoute = `${AUTH_ROUTE}/auth/google`;\nconst authRoute = `${AUTH_ROUTE}/auth`;\nconst clientRoute = `${AUTH_ROUTE}/client`;\nexport const getAuthClient = async () => {\n  try {\n    const token = getClientIdCache();\n    if (token === null) {\n      return null;\n    }\n    const res = await fetch(authRoute, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": token\n      }\n    });\n    const data = await res.json();\n    if (data === null || data === undefined) {\n      return null;\n    }\n    return data.data.user;\n  } catch (error) {\n    console.error(error);\n    return null;\n  }\n  ;\n};\nexport const registerClient = async body => {\n  try {\n    const token = getClientIdCache();\n    if (token === null) {\n      return null;\n    }\n    const res = await fetch(clientRoute + \"/register\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": token\n      },\n      body: JSON.stringify(body)\n    });\n    const data = await res.json();\n    if (data === null || data === undefined) {\n      return null;\n    }\n    return data.data.user;\n  } catch (error) {\n    console.error(error);\n    return null;\n  }\n  ;\n};","map":{"version":3,"names":["AUTH_ROUTE","getClientIdCache","logInRoute","authRoute","clientRoute","getAuthClient","token","res","fetch","method","headers","data","json","undefined","user","error","console","registerClient","body","JSON","stringify"],"sources":["C:/Users/danie/Documents/natgas/client/src/routes/auth/auth.routes.ts"],"sourcesContent":["import { AUTH_ROUTE } from \"../index\";\r\nimport { IUser } from \"../../interfaces/User.interfaces\";\r\nimport { getClientIdCache } from \"../../cache/auth\";\r\n\r\nexport const logInRoute = `${AUTH_ROUTE}/auth/google`;\r\nconst authRoute = `${AUTH_ROUTE}/auth`;\r\nconst clientRoute = `${AUTH_ROUTE}/client`;\r\n\r\nexport const getAuthClient = async (): Promise<null | IUser> => {\r\n    try {\r\n        const token = getClientIdCache();\r\n\r\n        if (token === null) {\r\n            return null;\r\n        }\r\n\r\n        const res = await fetch(authRoute, {\r\n            method: \"GET\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": token\r\n            }\r\n        });\r\n        const data = await res.json();\r\n\r\n        if (data === null || data === undefined) {\r\n            return null;\r\n        }\r\n\r\n        return data.data.user;\r\n    } catch (error) {\r\n        console.error(error);\r\n        return null;\r\n    };\r\n}\r\n\r\nexport interface IRegisterBody {\r\n    username: string;\r\n    height: number;\r\n    weight: number;\r\n    dateOfBirth: Date;\r\n    goal: string;\r\n    level: string;\r\n    sex: \"F\" | \"M\";\r\n}\r\n\r\nexport const registerClient = async (body: IRegisterBody): Promise<null | IUser> => {\r\n    try {\r\n        const token = getClientIdCache();\r\n\r\n        if (token === null) {\r\n            return null;\r\n        }\r\n\r\n        const res = await fetch(clientRoute + \"/register\", {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": token\r\n            },\r\n            body: JSON.stringify(body)\r\n        });\r\n        const data = await res.json();\r\n\r\n        if (data === null || data === undefined) {\r\n            return null;\r\n        }\r\n\r\n        return data.data.user;\r\n    } catch (error) {\r\n        console.error(error);\r\n        return null;\r\n    };\r\n}"],"mappings":"AAAA,SAASA,UAAU,QAAQ,UAAU;AAErC,SAASC,gBAAgB,QAAQ,kBAAkB;AAEnD,OAAO,MAAMC,UAAU,GAAI,GAAEF,UAAW,cAAa;AACrD,MAAMG,SAAS,GAAI,GAAEH,UAAW,OAAM;AACtC,MAAMI,WAAW,GAAI,GAAEJ,UAAW,SAAQ;AAE1C,OAAO,MAAMK,aAAa,GAAG,MAAAA,CAAA,KAAmC;EAC5D,IAAI;IACA,MAAMC,KAAK,GAAGL,gBAAgB,EAAE;IAEhC,IAAIK,KAAK,KAAK,IAAI,EAAE;MAChB,OAAO,IAAI;IACf;IAEA,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAACL,SAAS,EAAE;MAC/BM,MAAM,EAAE,KAAK;MACbC,OAAO,EAAE;QACL,cAAc,EAAE,kBAAkB;QAClC,eAAe,EAAEJ;MACrB;IACJ,CAAC,CAAC;IACF,MAAMK,IAAI,GAAG,MAAMJ,GAAG,CAACK,IAAI,EAAE;IAE7B,IAAID,IAAI,KAAK,IAAI,IAAIA,IAAI,KAAKE,SAAS,EAAE;MACrC,OAAO,IAAI;IACf;IAEA,OAAOF,IAAI,CAACA,IAAI,CAACG,IAAI;EACzB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACZC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;IACpB,OAAO,IAAI;EACf;EAAC;AACL,CAAC;AAYD,OAAO,MAAME,cAAc,GAAG,MAAOC,IAAmB,IAA4B;EAChF,IAAI;IACA,MAAMZ,KAAK,GAAGL,gBAAgB,EAAE;IAEhC,IAAIK,KAAK,KAAK,IAAI,EAAE;MAChB,OAAO,IAAI;IACf;IAEA,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAACJ,WAAW,GAAG,WAAW,EAAE;MAC/CK,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACL,cAAc,EAAE,kBAAkB;QAClC,eAAe,EAAEJ;MACrB,CAAC;MACDY,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACF,IAAI;IAC7B,CAAC,CAAC;IACF,MAAMP,IAAI,GAAG,MAAMJ,GAAG,CAACK,IAAI,EAAE;IAE7B,IAAID,IAAI,KAAK,IAAI,IAAIA,IAAI,KAAKE,SAAS,EAAE;MACrC,OAAO,IAAI;IACf;IAEA,OAAOF,IAAI,CAACA,IAAI,CAACG,IAAI;EACzB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACZC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;IACpB,OAAO,IAAI;EACf;EAAC;AACL,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}